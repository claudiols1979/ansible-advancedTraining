---
- hosts: docker-host
  become: yes  
  tasks:
    - name: Install pip
      yum: name=python3-pip state=present

    - name: install docker-py package
      pip: name=docker-py state=absent

    - name: install docker package
      pip: name=docker state=absent
    
    - name: Build Docker image from Dockerfile
      docker_image:
        name: web
        path: docker
        state: build

    - name: Running the container
      docker_container:
        image: web:latest
        path: docker
        state: running
    
    - name: check if container is running
      shell: docker ps